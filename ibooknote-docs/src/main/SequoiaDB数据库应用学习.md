# SequoiaDB数据库应用学习

## 1、介绍

SequoiaDB 是一个开源的金融级分布式关系型数据库，也支持非关系型数据库引擎，如JSON、S3。

ref：http://doc.sequoiadb.com/cn/

## 2、部署方式

* 独立模式部署
* 集群模式部署
* 容器模式部署

## 3、应用场景

* MySQL应用
* JSON应用
* S3与文件系统应用

其中MySQL实例和S3对象存储实例需要在集群安装完成后单独部署安装，而JSON实例不需要单独安装，SequoiaDB已默认支持。

## 4、集群管理方式

* 命令行Shell操作
* SAC图形界面操作
* API接口操作

## 5、集合空间、集合的概念

* 集合空间 -- 相当于数据库
* 集合 -- 相当于表，只属于某个集合空间

每个数据库引擎下可包含4096个集合空间。
文档为JSON格式，又称为记录。在数据库内部以BSON格式存储。

### 5.1、文档

最小长度：至少包含一个字段
最大长度：16M（BSON格式）
字段名：不以$开始，不包含.

### 5.2、集合

* 集合名最大长度127字节
* 集合名：不能为空串，不以$开始，不包含
* 单节点集合最大容量：集合空间最大容量
* 单集合空间最大集合数量：4096

集合的分区类型：

* 普通分区
* 水平范围分区
* 水平散列分区
* 垂直分区

### 5.3、集合空间

* 数据页大小：4k、8k、16k、32k、64k
* 单节点集合空间最大容量：对应数据页大小，分别为512GB、1TB、2TB、4TB、8TB
* 单节点集合空间最大数量	16384

### 5.4、索引

最大索引数量：64
索引最大字段数量：32

分区参考：http://doc.sequoiadb.com/cn/sequoiadb-cat_id-1561381739-edition_id-500

可在集合上创建

### 5.1、集合索引

可在集合上创建索引，创建集合时默认带一个$id索引，对应的key为 _id ，新增加的索引可以选择唯一性、可空性等：

* 是否可空
* 是否唯一
* 对应Key
* 其他字段待了解具体文档


### 6、连接协调节点

SAC>配置>SequoiaDB1>SYSCoord

数据库连接池方式连接时，需要指定所有协调节点。

### 7、数据一致性策略

采用最终一致性策略。

### 8、节点

* 协调节点--应用程序直接访问的节点
* 编目节点（元数据节点）
* 数据节点

### 9、线程安全性

每个连接对象及其子对象非线程安全；不同连接对象之间为线程安全。

使用方式：每个线程从连接池中获取连接，不要用单例模式创建连接（即线程共享连接）。


### 10、多租户隔离策略

* 多实例（每个应用一个实例）
* 数据区域隔离






     